<div style="padding : 0px 31px;">
	
	<div class="panel panel-default" style="text-align:center;margin-top:-130px;">
		  
	  <div class="panel-heading" style="border-bottom:0px;">
	    <h4 style="text-align:center;">Create Challenge</h4>
	  </div>

		<div class="panel-body">
			<form accept-charset="UTF-8" action="/challengr/post_video" data-remote="true" enctype="multipart/form-data" id="video_form" method="post" target="myiframe">

				<div style="display:none">
					<input name="utf8" type="hidden" value="âœ“">
				</div>

				<div class="fileUpload btn btn-default">
				  <span>Record Video</span>
				  <input id="video_file" name="video[file]" type="file" accept="video/*;capture=camcorder" style="width:200px;">
				</div>
				<br />
				<div style="margin: 0 auto;text-align:center;">
					<video style="display:none;margin: 0 auto;" id = "video_view" width="200" height="120" controls>
					</video>
				</div>
				<br />
			  
			  <input name="commit" type="submit" value="Save Video" id="attatchVidButton" style="display:none;">
			</form>
				  
			<form novalidate>
			  <div class = "row">
			  	<div class = "col-sm-3">
			  	  <b>Name:</b>
			  	</div>
			  	<div class = "col-sm-9">
			  		<input type="text" class="form-control" ng-model="newchallenge.name" />
			  	</div>
			  </div>
			  <br />
			    <input type="submit" class = "btn btn-primary" ng-click="createChallenge(newchallenge)" value="Create" />
			</form>
		</div>
	</div>
</div>

<style>
	.fileUpload {
		position: relative;
		overflow: hidden;
		margin: 10px;
		width: 200px;
	}
	.fileUpload input.upload {
		position: absolute;
		top: 0;
		right: 0;
		margin: 0;
		padding: 0;
		font-size: 20px;
		cursor: pointer;
		opacity: 0;
		filter: alpha(opacity=0);
	}
</style>
<iframe name="myiframe" id="video_frame" style="display:none;"></iframe>

<script>
	
	$(function(){
		

		$('#video_file').change(function() {
		  $("#video_form").submit();
		});

    $('#video_frame').load(function(){
			window.video_url = $('#video_frame').contents().find("body").html();
			var video  = document.getElementById('video_view');
			var source = document.createElement('source');
			var mycanvas = document.getElementById('mycanvas');

			$("#video_view").css("display","block");
			source.setAttribute('src', window.video_url);
			video.appendChild(source);

    });
	});

</script>